{% extends "base.html" %}
{% block content %}

<h1>Reviews</h1>
<p class="subtitle">Latest reviews posted by users.</p>

{% if not reviews %}
  <p>No reviews yet.</p>
{% endif %}

{% for r in reviews %}
  <div class="review">
    <div class="review-header">
      <div class="review-title">{{ r["title"] }}</div>
      <div class="stars">
        {% for i in range(r["rating"]) %}★{% endfor %}
      </div>
    </div>

    <div class="meta">
      {{ r["username"] }} •
      {{ r["date"].split("-")[2] }}/{{ r["date"].split("-")[1] }}/{{ r["date"].split("-")[0] }}
    </div>

    <p>{{ r["content"] }}</p>

    {% if session.get("user_id") and r["user_id"] == session.get("user_id") %}
      <div class="review-actions">
        <a class="btn" href="{{ url_for('edit_review', review_id=r['id']) }}">Edit</a>
        <form method="POST" action="{{ url_for('delete_review', review_id=r['id']) }}">
          <button class="btn danger" type="submit">Delete</button>
        </form>
      </div>
    {% endif %}
  </div>
{% endfor %}

{% endblock %}
